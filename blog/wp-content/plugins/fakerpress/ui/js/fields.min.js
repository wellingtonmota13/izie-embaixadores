"undefined"==typeof window.fakerpress&&(window.fakerpress={}),window.fakerpress.fields={},window.fakerpress.ready_class="fp-js-ready",window.fakerpress.plugin="fakerpress",window.fakerpress.abbr="fp",window.fakerpress.fieldName=function(a){return this.plugin+"["+a.join("][")+"]"},window.fakerpress.fieldId=function(a){return this.plugin+"-field-"+a.join("-")},window.fakerpress.searchId=function(a){var b=null;return"undefined"!=typeof a.id?b=a.id:"undefined"!=typeof a.ID?b=a.ID:"undefined"!=typeof a.value&&(b=a.value),void 0==a?null:b},window.fakerpress.fields.dates=function(a){"use strict";var b={after:["attr"],constrainInput:!1,dateFormat:"yy-mm-dd"};a(".fp-type-date").not(".hasDatepicker").datepicker(b),a(".fp-type-interval-wrap").each(function(){var b=a(this),c=b.find(".fp-type-dropdown"),d=b.find('[data-type="min"]'),e=b.find('[data-type="max"]');b.hasClass(window.fakerpress.ready_class)||(b.addClass(window.fakerpress.ready_class),d.on({change:function(){d.parents(".fp-field-wrap").find('[data-type="max"]').datepicker("option","minDate",a(this).val()).datepicker("refresh"),a(".fp-type-date.hasDatepicker").datepicker("refresh")}}),e.on({change:function(){e.parents(".fp-field-wrap").find('[data-type="min"]').datepicker("option","maxDate",a(this).val()).datepicker("refresh"),a(".fp-type-date.hasDatepicker").datepicker("refresh")}}),c.on({change:function(){var a=c.find(":selected"),b=a.attr("min"),f=a.attr("max");d.datepicker("setDate",b),e.datepicker("setDate",f)}}).trigger("change"))})},window.fakerpress.fields.dropdown=function(a,b){"use strict";var c=a(".fp-type-dropdown").not(".select2-offscreen, .select2-container");c.each(function(){var c=a(this),d={width:420};if(c.is("[multiple]")?(d.multiple=!0,c.is("[data-tags]")||(d.data=function(){return{results:c.data("options")}}),d.tokenSeparators=b.isArray(c.data("separator"))?c.data("separator"):[c.data("separator")],d.separator=c.data("separator"),d.regexSeparatorElements=["^("],d.regexSplitElements=["(?:"],a.each(d.tokenSeparators,function(a,b){d.regexSeparatorElements.push("[^"+b+"]+"),d.regexSplitElements.push("["+b+"]")}),d.regexSeparatorElements.push(")$"),d.regexSplitElements.push(")"),d.regexSeparatorString=d.regexSeparatorElements.join(""),d.regexSplitString=d.regexSplitElements.join(""),d.regexToken=new RegExp(d.regexSeparatorString,"ig"),d.regexSplit=new RegExp(d.regexSplitString,"ig"),d.id=window.fakerpress.searchId):d.width=200,d.matcher=function(a,c){var e=0==c.toUpperCase().indexOf(a.toUpperCase());if(!e&&"undefined"!=typeof d.tags){var f=b.where(d.tags,{text:c});if(d.tags.length>0&&b.isObject(f)){var g=window.fakerpress.searchId(f[0]);e=0==g.toUpperCase().indexOf(a.toUpperCase())}}return e},c.is("[data-tags]")&&(d.tags=c.data("options"),d.initSelection=function(c,e){var f=[];a(c.val().split(d.regexSplit)).each(function(){var a={id:this,text:this};if(d.tags.length>0&&b.isObject(d.tags[0])){var c=b.where(d.tags,{value:this});c.length>0&&(a=c[0],a={id:a.value,text:a.text})}f.push(a)}),e(f)},d.createSearchChoice=function(a){return a.match(d.regexToken)?{id:a,text:a}:void 0},0===d.tags.length&&(d.formatNoMatches=function(){return c.attr("placeholder")})),c.is("[data-source]")){var e=c.data("source");d.data={results:[]},d.allowClear=!0,d.escapeMarkup=function(a){return a},d.formatSelection=function(a){return b.template('<abbr title="<%= post_title %>"><%= post_type.labels.singular_name %>: <%= ID %></abbr>')(a)},d.formatResult=function(a){return b.template('<abbr title="<%= post_title %>"><%= post_type.labels.singular_name %>: <%= ID %></abbr>')(a)},d.ajax={dataType:"json",type:"POST",url:window.ajaxurl,data:function(c,d){var f=b.intersection(a("#fakerpress-field-post_types").val().split(","),b.pluck(b.where(a("#fakerpress-field-post_types").data("options"),{hierarchical:!0}),"id"));return{action:"fakerpress.select2-"+e,query:{s:c,posts_per_page:10,paged:d,post_type:f}}},results:function(b){return a.each(b.results,function(a,b){b.id=b.ID}),b}}}c.select2(d)}).on("change",function(c){var d=a(this),e=a(this).data("value");d.is("[multiple]")&&d.is("[data-source]")&&(c.added?b.isArray(e)?e.push(c.added):e=[c.added]:e=b.isArray(e)?b.without(e,c.removed):[],d.data("value",e).attr("data-value",JSON.stringify(e)))})},window.fakerpress.fields.range=function(a){"use strict";a(".fp-type-range-wrap").each(function(){var b=a(this),c=b.find('.fp-type-number[data-type="min"]'),d=b.find('.fp-type-number[data-type="max"]');b.hasClass(window.fakerpress.ready_class)||(b.addClass(window.fakerpress.ready_class),c.on({"change keyup":function(){a.isNumeric(a(this).val())?(d.removeAttr("disabled"),d.val()&&a(this).val()>=d.val()&&a(this).val("")):a(this).val("")}}))})},function(a){a(document).ready(function(){a.each(window.fakerpress.fields,function(a,b){b(window.jQuery,window._)})})}(jQuery),function(a,b){"use strict";a(document).ready(function(){a("form").children(".form-table").children("tbody").children(".fp-type-meta-container").each(function(){var c=a(this),d=".fp-field-wrap",e=c.children(d),f=".fp-table-meta",g=e.children(f),h=".fp-meta_type-container",i=".fp-meta_type",j=".fp-meta_name-container",k=".fp-meta_name",l=".fp-meta_conf-container",m=".fp-action-duplicate",n=".fp-action-remove",o=".fp-action-order",p=".fp-field-label",q=".fp-internal-label",r=".fp-field";c.on("meta",[],function(){g=e.children(f),c.data("metas",g),1!==g.length||g.eq(0).find(i).select2("val")?g.find(n).prop("disabled",!1).end().find(k).prop("required",!0):g.eq(0).find(n).prop("disabled",!0).end().find(k).prop("required",!1),g.each(function(e){var f,g=a(this),m=g.find(o),n=g.find(i),s=n.select2("val"),t=g.find(k),u=(t.val(),g.find(j)),v=(g.find(h),g.find(l)),w=g.find(r);s instanceof jQuery&&(s=s.val()),f=a(".fp-template-"+s).filter('[data-rel="'+c.attr("id")+'"]').filter("[data-callable]"),m.val(e+1),w.each(function(){var c=a(this),f=c.next(p),g=c.next(q),h=c.data("name"),i=c.data("id"),j=[],k=[];0===f.length&&(f=c.parents(d).eq(0).find(p)),b.each(i,function(a){j.push(a),"meta"===a&&j.push(e)}),b.each(h,function(a){k.push(a),"meta"===a&&k.push(e)}),0!==j.length&&(c.attr("id",window.fakerpress.fieldId(j)),f.attr("for",window.fakerpress.fieldId(j)),g.attr("for",window.fakerpress.fieldId(j))),0!==k.length&&c.attr("name",window.fakerpress.fieldName(k))}),s&&0!==f.length?(u.removeClass("fp-last-child"),v.show()):(u.addClass("fp-last-child"),v.hide())}),a.each(window.fakerpress.fields,function(a,b){b(window.jQuery,window._)})}).trigger("meta"),c.on("change",i,[],function(b){var e=a(this),g=e.parents(f),h=a(".fp-template-"+b.added.id).filter('[data-rel="'+c.attr("id")+'"]').filter("[data-callable]"),i=h.html(),j=g.find(l),k=j.find(d);k.empty(),0!==h.length&&k.append(i),c.trigger("meta")}),c.on("click",m,[],function(){var b=a(this),d=b.parents(f),g=d.clone();g.find(i).select2("val","").end().find(k).val("").end().find(".fp-type-date").removeClass("hasDatepicker").end().find(".fp-type-dropdown").removeClass("select2-offscreen").filter(".select2-container").remove(),e.append(g),c.trigger("meta")}),c.on("click",n,[],function(){var b=a(this),d=b.parents(f),e=d.find(i),h=d.find(k);1===g.length?(e.select2("val",""),h.val("")):d.remove(),c.trigger("meta")})})})}(window.jQuery,window._);